<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="appTitle">Özel Sistem Karşılaştırma Aracı</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f0f2f5;
            --text-color: #333;
            --card-bg-color: #fff;
            --system1-bg: #e0e7ff; /* Blue-50 */
            --system1-text: #4338ca; /* Indigo-700 */
            --system2-bg: #d1fae5; /* Emerald-50 */
            --system2-text: #065f46; /* Emerald-700 */
            --accent-color-s1: #6366f1; /* Indigo-500 */
            --accent-color-s2: #10b981; /* Emerald-500 */
            --error-bg: #fee2e2;
            --error-text: #b91c1c;
            --info-bg: #dbeafe;
            --info-text: #1e40af;
            --purple-bg: #ede9fe;
            --purple-text: #6b21a8;
        }

        body.dark-mode {
            --bg-color: #1a202c; /* Gray-900 */
            --text-color: #e2e8f0; /* Gray-200 */
            --card-bg-color: #2d3748; /* Gray-800 */
            --system1-bg: #4a5568; /* Gray-700 */
            --system1-text: #9f7aea; /* Purple-400 */
            --system2-bg: #48bb78; /* Green-500 */
            --system2-text: #fff;
            --accent-color-s1: #a78bfa; /* Violet-400 */
            --accent-color-s2: #38b2ac; /* Teal-500 */
            --error-bg: #7f1d1d; /* Red-900 */
            --error-text: #fca5a5; /* Red-300 */
            --info-bg: #1e3a8a; /* Blue-900 */
            --info-text: #bfdbfe; /* Blue-200 */
            --purple-bg: #5b21b6; /* Violet-700 */
            --purple-text: #ddd6fe; /* Violet-200 */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .container {
            background-color: var(--card-bg-color);
            transition: background-color 0.3s ease;
        }
        .system-panel {
            background-color: var(--system1-bg); /* Use for S1 */
            transition: background-color 0.3s ease;
        }
        .system-panel-s2 {
            background-color: var(--system2-bg); /* Use for S2 */
            transition: background-color 0.3s ease;
        }
        .system-panel h2 {
            color: var(--system1-text);
            transition: color 0.3s ease;
        }
        .system-panel-s2 h2 {
            color: var(--system2-text);
            transition: color 0.3s ease;
        }
        .error-message {
            background-color: var(--error-bg);
            color: var(--error-text);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .info-message {
            background-color: var(--info-bg);
            color: var(--info-text);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .bottleneck-analysis {
            background-color: var(--purple-bg);
            color: var(--purple-text);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .comparison-results-section {
            animation: fadeIn 0.8s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Styles for all vertical bar charts (Total and Components) */
        .bar-chart-section {
            background-color: var(--card-bg-color);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .bar-chart-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            height: 200px; /* Adjust height as needed */
            width: 100%;
        }
        .bar-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            margin: 0 8px; /* Reduced margin for component bars */
            position: relative;
            max-width: 150px; /* Limit width for individual bars */
        }
        .bar {
            width: 80%;
            border-radius: 8px 8px 0 0;
            transition: height 0.8s ease-out, background 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem; /* Adjusted font size for component bars */
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            min-height: 25px; /* Minimum height for visibility */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .bar-s1-color {
            background: linear-gradient(to top, var(--accent-color-s1), #4f46e5); /* Indigo gradient */
        }
        .bar-s2-color {
            background: linear-gradient(to top, var(--accent-color-s2), #059669); /* Emerald gradient */
        }
        .bar-label {
            margin-top: 8px;
            font-size: 0.8rem; /* Adjusted font size */
            font-weight: 600;
            color: var(--text-color);
            text-align: center;
            word-break: break-word; /* Ensure long names wrap */
        }
    </style>
</head>
<body class="p-6">
    <div class="container">
        <div class="flex justify-between items-center mb-4">
            <select id="languageToggle" class="px-3 py-2 rounded-md bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-100 shadow-md transition-colors duration-300">
                <option value="tr">Türkçe</option>
                <option value="en">English</option>
            </select>
            <button id="themeToggle" class="px-4 py-2 rounded-full bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-100 shadow-md transition-colors duration-300">
                Tema Değiştir
            </button>
        </div>
        <h1 class="text-4xl font-extrabold text-center text-gray-900 mb-8" data-key="appTitle">Özel Sistem Karşılaştırma Aracı</h1>

        <!-- Sistem Seçim Alanı -->
        <div class="flex flex-col md:flex-row justify-center items-start gap-8 mb-8">
            <!-- Sistem 1 Bileşen Seçimi -->
            <div class="w-full md:w-1/2 bg-indigo-50 p-6 rounded-lg shadow-md system-panel">
                <div class="mb-4">
                    <label for="s1-name" class="block text-md font-medium text-gray-700 mb-1" data-key="system1NameLabel">Sistem 1 Adı:</label>
                    <input type="text" id="s1-name" placeholder="Eski Sistemim" data-key="system1NamePlaceholder" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-md mb-2">
                </div>
                <div class="mb-4">
                    <label for="s1-cpu-search" class="block text-md font-medium text-gray-700 mb-1" data-key="cpuSearchLabel">CPU Ara:</label>
                    <input type="text" id="s1-cpu-search" placeholder="İşlemci Ara..." data-key="cpuSearchPlaceholder" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-md mb-2">
                    <label for="s1-cpu" class="block text-md font-medium text-gray-700 mb-1" data-key="cpuLabel">İşlemci (CPU):</label>
                    <select id="s1-cpu" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-md rounded-md shadow-sm"></select>
                </div>
                <div class="mb-4">
                    <label for="s1-gpu-search" class="block text-md font-medium text-gray-700 mb-1" data-key="gpuSearchLabel">GPU Ara:</label>
                    <input type="text" id="s1-gpu-search" placeholder="Ekran Kartı Ara..." data-key="gpuSearchPlaceholder" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-md mb-2">
                    <label for="s1-gpu" class="block text-md font-medium text-gray-700 mb-1" data-key="gpuLabel">Ekran Kartı (GPU):</label>
                    <select id="s1-gpu" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-md rounded-md shadow-sm"></select>
                </div>
                <div class="mb-4">
                    <label for="s1-ram" class="block text-md font-medium text-gray-700 mb-1" data-key="ramLabel">Bellek (RAM):</label>
                    <select id="s1-ram" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-md rounded-md shadow-sm"></select>
                </div>
                <div class="mb-4">
                    <label for="s1-storage" class="block text-md font-medium text-gray-700 mb-1" data-key="storageLabel">Depolama:</label>
                    <select id="s1-storage" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-md rounded-md shadow-sm"></select>
                </div>
                <div class="mb-4">
                    <label for="s1-psu" class="block text-md font-medium text-gray-700 mb-1" data-key="psuLabel">Güç Kaynağı (PSU):</label>
                    <select id="s1-psu" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-md rounded-md shadow-sm"></select>
                </div>
            </div>

            <!-- Sistem 2 Bileşen Seçimi -->
            <div class="w-full md:w-1/2 bg-emerald-50 p-6 rounded-lg shadow-md system-panel system-panel-s2">
                <div class="mb-4">
                    <label for="s2-name" class="block text-md font-medium text-gray-700 mb-1" data-key="system2NameLabel">Sistem 2 Adı:</label>
                    <input type="text" id="s2-name" placeholder="Yeni Sistemim" data-key="system2NamePlaceholder" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-md mb-2">
                </div>
                <div class="mb-4">
                    <label for="s2-cpu-search" class="block text-md font-medium text-gray-700 mb-1" data-key="cpuSearchLabel">CPU Ara:</label>
                    <input type="text" id="s2-cpu-search" placeholder="İşlemci Ara..." data-key="cpuSearchPlaceholder" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-md mb-2">
                    <label for="s2-cpu" class="block text-md font-medium text-gray-700 mb-1" data-key="cpuLabel">İşlemci (CPU):</label>
                    <select id="s2-cpu" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-md rounded-md shadow-sm"></select>
                </div>
                <div class="mb-4">
                    <label for="s2-gpu-search" class="block text-md font-medium text-gray-700 mb-1" data-key="gpuSearchLabel">GPU Ara:</label>
                    <input type="text" id="s2-gpu-search" placeholder="Ekran Kartı Ara..." data-key="gpuSearchPlaceholder" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-md mb-2">
                    <label for="s2-gpu" class="block text-md font-medium text-gray-700 mb-1" data-key="gpuLabel">Ekran Kartı (GPU):</label>
                    <select id="s2-gpu" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-md rounded-md shadow-sm"></select>
                </div>
                <div class="mb-4">
                    <label for="s2-ram" class="block text-md font-medium text-gray-700 mb-1" data-key="ramLabel">Bellek (RAM):</label>
                    <select id="s2-ram" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-md rounded-md shadow-sm"></select>
                </div>
                <div class="mb-4">
                    <label for="s2-storage" class="block text-md font-medium text-gray-700 mb-1" data-key="storageLabel">Depolama:</label>
                    <select id="s2-storage" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-md rounded-md shadow-sm"></select>
                </div>
                <div class="mb-4">
                    <label for="s2-psu" class="block text-md font-medium text-gray-700 mb-1" data-key="psuLabel">Güç Kaynağı (PSU):</label>
                    <select id="s2-psu" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-md rounded-md shadow-sm"></select>
                </div>
            </div>
        </div>

        <div class="flex justify-center mb-10">
            <button id="compareButton" class="px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-bold rounded-lg shadow-lg hover:from-blue-700 hover:to-indigo-800 transition transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300" data-key="compareButton">
                Sistemleri Karşılaştır
            </button>
        </div>

        <div id="errorMessage" class="hidden mt-8 p-4 bg-red-100 border border-red-400 text-red-700 rounded-md text-center error-message"></div>

        <!-- Karşılaştırma Sonuçları Alanı -->
        <div id="comparisonResults" class="hidden border-t-2 border-gray-200 pt-8 mt-8 comparison-results-section">
            <h2 id="comparisonTitle" class="text-3xl font-bold text-center text-gray-800 mb-6"></h2>

            <!-- Genel Bilgiler -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 mb-8">
                <div id="system1Info" class="bg-indigo-50 p-6 rounded-lg shadow-md flex flex-col justify-between system-panel"></div>
                <div id="system2Info" class="bg-emerald-50 p-6 rounded-lg shadow-md flex flex-col justify-between system-panel system-panel-s2"></div>
            </div>

            <!-- Toplam Puanlar (Sütun Grafik olarak) -->
            <div id="totalScoreComparisonBar" class="bar-chart-section">
                <h3 class="text-lg font-semibold text-gray-700 mb-2 text-center" data-key="totalScoreComparison">Toplam Puan Karşılaştırması</h3>
                <div class="bar-chart-container">
                    <div class="bar-item">
                        <div id="totalBarS1" class="bar bar-s1-color"></div>
                        <span class="bar-label" id="totalLabelS1"></span>
                    </div>
                    <div class="bar-item">
                        <div id="totalBarS2" class="bar bar-s2-color"></div>
                        <span class="bar-label" id="totalLabelS2"></span>
                    </div>
                </div>
            </div>


            <!-- Bileşen Bazında Karşılaştırma Barları -->
            <div class="mt-8">
                <div id="cpuComparisonBar" class="bar-chart-section"></div>
                <div id="gpuComparisonBar" class="bar-chart-section"></div>
                <div id="ramComparisonBar" class="bar-chart-section"></div>
                <div id="storageComparisonBar" class="bar-chart-section"></div>
                <div id="psuComparisonBar" class="bar-chart-section"></div>
            </div>

            <!-- Darboğaz Sonuçları -->
            <div id="bottleneckAnalysis" class="mt-10 p-6 bg-purple-50 border border-purple-200 rounded-lg text-purple-800 bottleneck-analysis"></div>

            <div class="mt-10 p-6 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 info-message">
                <h3 class="text-xl font-semibold mb-3" data-key="scoreNoteTitle">Puanlama Hakkında Not:</h3>
                <p class="mb-2" data-key="scoreNoteCPU">
                    <span class="font-bold">CPU</span> ve <span class="font-bold">GPU</span> puanları, yaklaşık PassMark benchmark sonuçlarına dayanmaktadır. Bu puanlar, bileşenlerin teorik performansını gösterir ve gerçek dünya performansı farklılık gösterebilir.
                </p>
                <p class="mb-2" data-key="scoreNoteRAM">
                    <span class="font-bold">RAM, Depolama</span> ve <span class="font-bold">PSU</span> için ise sistemler arasındaki
                    <span class="font-bold">göreceli performansı ve güncelliği</span> yansıtan basit puanlar atanmıştır (daha yüksek puan daha iyi anlamına gelir). Bu puanlar doğrudan benchmark testlerinden alınmamıştır, genel bir referans olarak kullanılabilir.
                </p>
                <p class="mb-2" data-key="scoreNoteBottleneck">
                    <span class="font-bold">Darboğaz yüzdesi</span>, İşlemci ve Ekran Kartı puanları arasındaki farka dayanarak hesaplanır. Daha yüksek bir yüzde, bileşenler arasında daha büyük bir performans dengesizliği olduğunu gösterir. Bu, sistemin genel performansının bir bileşen tarafından kısıtlandığı anlamına gelebilir.
                </p>
                <ul class="list-disc list-inside mt-3">
                    <li data-key="exampleCPUScores">Örnek CPU Skorları (Yaklaşık PassMark CPU Mark):
                        <ul class="list-disc list-inside ml-4">
                            <li>Intel Core i7-4790: ~7266</li>
                            <li>AMD Ryzen 5 2600X: ~13800</li>
                            <li>Intel Core i9-14900K: ~62000</li>
                        </ul>
                    </li>
                    <li data-key="exampleGPUScores">Örnek GPU Skorları (Yaklaşık PassMark G3D Mark):
                        <ul class="list-disc list-inside ml-4">
                            <li>NVIDIA GeForce GTX 960: ~8000</li>
                            <li>AMD Radeon RX 570: ~12000</li>
                            <li>NVIDIA GeForce RTX 4080: ~34440</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Çeviriler
        const translations = {
            tr: {
                appTitle: "Özel Sistem Karşılaştırma Aracı",
                themeToggle: "Tema Değiştir",
                system1NameLabel: "Sistem 1 Adı:",
                system1NamePlaceholder: "Eski Sistemim",
                system2NameLabel: "Sistem 2 Adı:",
                system2NamePlaceholder: "Yeni Sistemim",
                cpuSearchLabel: "CPU Ara:",
                gpuSearchLabel: "GPU Ara:",
                cpuSearchPlaceholder: "İşlemci Ara...",
                gpuSearchPlaceholder: "Ekran Kartı Ara...",
                cpuLabel: "İşlemci (CPU):",
                gpuLabel: "Ekran Kartı (GPU):",
                ramLabel: "Bellek (RAM):",
                storageLabel: "Depolama:",
                psuLabel: "Güç Kaynağı (PSU):",
                compareButton: "Sistemleri Karşılaştır",
                errorMessage: "Lütfen her iki sistem için de İşlemci ve Ekran Kartı seçimi yapın.",
                comparisonTitleSuffix: "Performans Karşılaştırması", // Used as: `${s1Name} vs ${s2Name} ${translated.comparisonTitleSuffix}`
                infoSystemSuffix: "Bilgileri", // Used as: `${s1Name} ${translated.infoSystemSuffix}`
                totalScoreComparison: "Toplam Puan Karşılaştırması",
                cpuPerformance: "İşlemci (CPU) Performansı",
                gpuPerformance: "Ekran Kartı (GPU) Performansı",
                ramPerformance: "Bellek (RAM) Performansı",
                storagePerformance: "Depolama Performansı",
                psuSufficiency: "Güç Kaynağı (PSU) Yeterliliği",
                bottleneckAnalysis: "Darboğaz Analizi:",
                bottleneckSuffix: "Darboğaz:", // Used as: `${s1Name} ${translated.bottleneckSuffix}`
                scoreNoteTitle: "Puanlama Hakkında Not:",
                scoreNoteCPU: "CPU ve GPU puanları, yaklaşık PassMark benchmark sonuçlarına dayanmaktadır. Bu puanlar, bileşenlerin teorik performansını gösterir ve gerçek dünya performansı farklılık gösterebilir.",
                scoreNoteRAM: "RAM, Depolama ve PSU için ise sistemler arasındaki göreceli performansı ve güncelliği yansıtan basit puanlar atanmıştır (daha yüksek puan daha iyi anlamına gelir). Bu puanlar doğrudan benchmark testlerinden alınmamıştır, genel bir referans olarak kullanılabilir.",
                scoreNoteBottleneck: "Darboğaz yüzdesi, İşlemci ve Ekran Kartı puanları arasındaki farka dayanarak hesaplanır. Daha yüksek bir yüzde, bileşenler arasında daha büyük bir performans dengesizliği olduğunu gösterir. Bu, sistemin genel performansının bir bileşen tarafından kısıtlandığı anlamına gelebilir.",
                exampleCPUScores: "Örnek CPU Skorları (Yaklaşık PassMark CPU Mark):",
                exampleGPUScores: "Örnek GPU Skorları (Yaklaşık PassMark G3D Mark):",
                bottleneckExplanation0: "Çok az veya hiç darboğaz yok. Sistem oldukça dengeli.",
                bottleneckExplanation1: "Minimal darboğaz. Çoğu senaryoda fark edilmez ancak küçük bir bileşen dengesizliği var.",
                bottleneckExplanation2: "Orta seviye darboğaz. Bazı oyunlarda veya uygulamalarda hissedilebilir bir performans düşüşü yaşanabilir.",
                bottleneckExplanation3: "Yüksek darboğaz. Seçilen ${component} diğer bileşeni önemli ölçüde kısıtlayabilir, performans büyük ölçüde etkilenebilir.",
                balanced: "Dengeli",
                processor: "İşlemci (CPU)",
                graphicsCard: "Ekran Kartı (GPU)",
                selectOption: "-- Seçin --"
            },
            en: {
                appTitle: "Custom System Comparison Tool",
                themeToggle: "Toggle Theme",
                system1NameLabel: "System 1 Name:",
                system1NamePlaceholder: "My Old System",
                system2NameLabel: "System 2 Name:",
                system2NamePlaceholder: "My New System",
                cpuSearchLabel: "Search CPU:",
                gpuSearchLabel: "Search GPU:",
                cpuSearchPlaceholder: "Search CPU...",
                gpuSearchPlaceholder: "Search GPU...",
                cpuLabel: "Processor (CPU):",
                gpuLabel: "Graphics Card (GPU):",
                ramLabel: "Memory (RAM):",
                storageLabel: "Storage:",
                psuLabel: "Power Supply (PSU):",
                compareButton: "Compare Systems",
                errorMessage: "Please select both a Processor and a Graphics Card for both systems.",
                comparisonTitleSuffix: "Performance Comparison",
                infoSystemSuffix: "Information",
                totalScoreComparison: "Total Score Comparison",
                cpuPerformance: "Processor (CPU) Performance",
                gpuPerformance: "Graphics Card (GPU) Performance",
                ramPerformance: "Memory (RAM) Performance",
                storagePerformance: "Storage Performance",
                psuSufficiency: "Power Supply (PSU) Sufficiency",
                bottleneckAnalysis: "Bottleneck Analysis:",
                bottleneckSuffix: "Bottleneck:",
                scoreNoteTitle: "Note on Scoring:",
                scoreNoteCPU: "CPU and GPU scores are based on approximate PassMark benchmark results. These scores represent the theoretical performance of components and actual real-world performance may vary.",
                scoreNoteRAM: "For RAM, Storage, and PSU, simple scores are assigned that reflect the relative performance and modernity between systems (higher score means better). These scores are not directly taken from benchmark tests and can be used as a general reference.",
                scoreNoteBottleneck: "The bottleneck percentage is calculated based on the difference between Processor and Graphics Card scores. A higher percentage indicates a greater performance imbalance between components. This may mean that the overall system performance is limited by one component.",
                exampleCPUScores: "Example CPU Scores (Approx. PassMark CPU Mark):",
                exampleGPUScores: "Example GPU Scores (Approx. PassMark G3D Mark):",
                bottleneckExplanation0: "Very little or no bottleneck. The system is well-balanced.",
                bottleneckExplanation1: "Minimal bottleneck. Unnoticeable in most scenarios, but there's a slight component imbalance.",
                bottleneckExplanation2: "Medium bottleneck. A noticeable performance drop may occur in some games or applications.",
                bottleneckExplanation3: "High bottleneck. The selected ${component} may significantly limit the other component, greatly affecting performance.",
                balanced: "Balanced",
                processor: "Processor (CPU)",
                graphicsCard: "Graphics Card (GPU)",
                selectOption: "-- Select --"
            }
        };

        let currentLang = localStorage.getItem('language') || 'tr'; // Varsayılan dil Türkçe

        // Bileşen Verileri (PassMark ve göreceli puanlar)
        // 'details' artık dil anahtarları içeren bir nesne olacak
        const cpuData = [
            { id: 'i5-2400', name: 'Intel Core i5-2400', details: { tr: '4 Çekirdek, 4 İzlek', en: '4 Cores, 4 Threads' }, score: 3870 },
            { id: 'i7-4790', name: 'Intel Core i7-4790', details: { tr: '4 Çekirdek, 8 İzlek', en: '4 Cores, 8 Threads' }, score: 7266 },
            { id: 'i5-10400f', name: 'Intel Core i5-10400F', details: { tr: '6 Çekirdek, 12 İzlek', en: '6 Cores, 12 Threads' }, score: 12127 },
            { id: 'i5-11600k', name: 'Intel Core i5-11600K', details: { tr: '6 Çekirdek, 12 İzlek', en: '6 Cores, 12 Threads' }, score: 21500 },
            { id: 'i7-12700k', name: 'Intel Core i7-12700K', details: { tr: '12 Çekirdek, 20 İzlek', en: '12 Cores, 20 Threads' }, score: 34967 },
            { id: 'i9-14900k', name: 'Intel Core i9-14900K', details: { tr: '24 Çekirdek, 32 İzlek', en: '24 Cores, 32 Threads' }, score: 62000 },
            // AMD CPUs
            { id: 'r3-1200', name: 'AMD Ryzen 3 1200', details: { tr: '4 Çekirdek, 4 İzlek', en: '4 Cores, 4 Threads' }, score: 6200 },
            { id: 'r5-1600', name: 'AMD Ryzen 5 1600', details: { tr: '6 Çekirdek, 12 İzlek', en: '6 Cores, 12 Threads' }, score: 12271 },
            { id: 'r5-2600x', name: 'AMD Ryzen 5 2600X', details: { tr: '6 Çekirdek, 12 İzlek', en: '6 Cores, 12 Threads' }, score: 13800 },
            { id: 'r7-2700x', name: 'AMD Ryzen 7 2700X', details: { tr: '8 Çekirdek, 16 İzlek', en: '8 Cores, 16 Threads' }, score: 17800 },
            { id: 'r5-3600', name: 'AMD Ryzen 5 3600', details: { tr: '6 Çekirdek, 12 İzlek', en: '6 Cores, 12 Threads' }, score: 17750 },
            { id: 'r7-3700x', name: 'AMD Ryzen 7 3700X', details: { tr: '8 Çekirdek, 16 İzlek', en: '8 Cores, 16 Threads' }, score: 23600 },
            { id: 'r9-3900x', name: 'AMD Ryzen 9 3900X', details: { tr: '12 Çekirdek, 24 İzlek', en: '12 Cores, 24 Threads' }, score: 33400 },
            { id: 'r5-5600x', name: 'AMD Ryzen 5 5600X', details: { tr: '6 Çekirdek, 12 İzlek', en: '6 Cores, 12 Threads' }, score: 21873 },
            { id: 'r7-5800x', name: 'AMD Ryzen 7 5800X', details: { tr: '8 Çekirdek, 16 İzlek', en: '8 Cores, 16 Threads' }, score: 30000 },
            { id: 'r9-5900x', name: 'AMD Ryzen 9 5900X', details: { tr: '12 Çekirdek, 24 İzlek', en: '12 Cores, 24 Threads' }, score: 39000 },
            { id: 'r9-5950x', name: 'AMD Ryzen 9 5950X', details: { tr: '16 Çekirdek, 32 İzlek', en: '16 Cores, 32 Threads' }, score: 45000 },
            { id: 'r5-7600x', name: 'AMD Ryzen 5 7600X', details: { tr: '6 Çekirdek, 12 İzlek', en: '6 Cores, 12 Threads' }, score: 28000 },
            { id: 'r7-7700x', name: 'AMD Ryzen 7 7700X', details: { tr: '8 Çekirdek, 16 İzlek', en: '8 Cores, 16 Threads' }, score: 36000 },
            { id: 'r7-7800x3d', name: 'AMD Ryzen 7 7800X3D', details: { tr: '8 Çekirdek, 16 İzlek', en: '8 Cores, 16 Threads' }, score: 48674 },
            { id: 'r9-7900x', name: 'AMD Ryzen 9 7900X', details: { tr: '12 Çekirdek, 24 İzlek', en: '12 Cores, 24 Threads' }, score: 45000 },
            { id: 'r9-7950x', name: 'AMD Ryzen 9 7950X', details: { tr: '16 Çekirdek, 32 İzlek', en: '16 Cores, 32 Threads' }, score: 59000 },
            { id: 'r9-7950x3d', name: 'AMD Ryzen 9 7950X3D', details: { tr: '16 Çekirdek, 32 İzlek', en: '16 Cores, 32 Threads' }, score: 63500 },
            { id: 'r3-3100', name: 'AMD Ryzen 3 3100', details: { tr: '4 Çekirdek, 8 İzlek', en: '4 Cores, 8 Threads' }, score: 10400 },
            { id: 'r5-3500x', name: 'AMD Ryzen 5 3500X', details: { tr: '6 Çekirdek, 6 İzlek', en: '6 Cores, 6 Threads' }, score: 13000 },
            { id: 'r5-4600g', name: 'AMD Ryzen 5 4600G', details: { tr: '6 Çekirdek, 12 İzlek', en: '6 Cores, 12 Threads' }, score: 16003 },
            { id: 'r7-4700g', name: 'AMD Ryzen 7 4700G', details: { tr: '8 Çekirdek, 16 İzlek', en: '8 Cores, 16 Threads' }, score: 21000 },
            { id: 'r9-4900hs', name: 'AMD Ryzen 9 4900HS', details: { tr: '8 Çekirdek, 16 İzlek', en: '8 Cores, 16 Threads' }, score: 18869 }, // Laptop CPU
            { id: 'r3-5300u', name: 'AMD Ryzen 3 5300U', details: { tr: '4 Çekirdek, 8 İzlek', en: '4 Cores, 8 Threads' }, score: 9800 }, // Laptop CPU
            { id: 'r5-5500u', name: 'AMD Ryzen 5 5500U', details: { tr: '6 Çekirdek, 12 İzlek', en: '6 Cores, 12 Threads' }, score: 14500 }, // Laptop CPU
            { id: 'r7-5700u', name: 'AMD Ryzen 7 5700U', details: { tr: '8 Çekirdek, 16 İzlek', en: '8 Cores, 16 Threads' }, score: 19500 }, // Laptop CPU
            { id: 'r5-5600g', name: 'AMD Ryzen 5 5600G', details: { tr: '6 Çekirdek, 12 İzlek', en: '6 Cores, 12 Threads' }, score: 20500 },
            { id: 'r7-5700g', name: 'AMD Ryzen 7 5700G', details: { tr: '8 Çekirdek, 16 İzlek', en: '8 Cores, 16 Threads' }, score: 24000 },
            { id: 'r5-7500f', name: 'AMD Ryzen 5 7500F', details: { tr: '6 Çekirdek, 12 İzlek', en: '6 Cores, 12 Threads' }, score: 26000 },
            { id: 'r9-7900x3d', name: 'AMD Ryzen 9 7900X3D', details: { tr: '12 Çekirdek, 24 İzlek', en: '12 Cores, 24 Threads' }, score: 55000 },
            { id: 'r7-8700g', name: 'AMD Ryzen 7 8700G', details: { tr: '8 Çekirdek, 16 İzlek', en: '8 Cores, 16 Threads' }, score: 38000 },
            { id: 'r5-8600g', name: 'AMD Ryzen 5 8600G', details: { tr: '6 Çekirdek, 12 İzlek', en: '6 Cores, 12 Threads' }, score: 30000 },
        ];

        const gpuData = [
            // NVIDIA GTX Series
            { id: 'gtx-750ti', name: 'NVIDIA GeForce GTX 750 Ti', details: { tr: '2GB GDDR5', en: '2GB GDDR5' }, score: 3900 },
            { id: 'gtx-950', name: 'NVIDIA GeForce GTX 950', details: { tr: '2GB GDDR5', en: '2GB GDDR5' }, score: 5346 },
            { id: 'gtx-960', name: 'NVIDIA GeForce GTX 960', details: { tr: '2GB GDDR5', en: '2GB GDDR5' }, score: 8000 },
            { id: 'gtx-970', name: 'NVIDIA GeForce GTX 970', details: { tr: '4GB GDDR5', en: '4GB GDDR5' }, score: 9800 },
            { id: 'gtx-1050', name: 'NVIDIA GeForce GTX 1050', details: { tr: '2GB GDDR5', en: '2GB GDDR5' }, score: 4500 },
            { id: 'gtx-1050ti', name: 'NVIDIA GeForce GTX 1050 Ti', details: { tr: '4GB GDDR5', en: '4GB GDDR5' }, score: 6323 },
            { id: 'gtx-1060-3gb', name: 'NVIDIA GeForce GTX 1060 (3GB)', details: { tr: '3GB GDDR5', en: '3GB GDDR5' }, score: 9000 },
            { id: 'gtx-1060-6gb', name: 'NVIDIA GeForce GTX 1060 (6GB)', details: { tr: '6GB GDDR5', en: '6GB GDDR5' }, score: 10083 },
            { id: 'gtx-1070', name: 'NVIDIA GeForce GTX 1070', details: { tr: '8GB GDDR5', en: '8GB GDDR5' }, score: 12800 },
            { id: 'gtx-1080', name: 'NVIDIA GeForce GTX 1080', details: { tr: '8GB GDDR5X', en: '8GB GDDR5X' }, score: 14700 },
            { id: 'gtx-1650', name: 'NVIDIA GeForce GTX 1650', details: { tr: '4GB GDDR5/6', en: '4GB GDDR5/6' }, score: 7878 },
            { id: 'gtx-1660', name: 'NVIDIA GeForce GTX 1660', details: { tr: '6GB GDDR5', en: '6GB GDDR5' }, score: 11000 },
            { id: 'gtx-1660s', name: 'NVIDIA GeForce GTX 1660 SUPER', details: { tr: '6GB GDDR6', en: '6GB GDDR6' }, score: 12500 },
            { id: 'gtx-1660ti', name: 'NVIDIA GeForce GTX 1660 Ti', details: { tr: '6GB GDDR6', en: '6GB GDDR6' }, score: 13000 },

            // NVIDIA RTX Series
            { id: 'rtx-2060', name: 'NVIDIA GeForce RTX 2060', details: { tr: '6GB GDDR6', en: '6GB GDDR6' }, score: 14125 },
            { id: 'rtx-2060s', name: 'NVIDIA GeForce RTX 2060 SUPER', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 15500 },
            { id: 'rtx-2070', name: 'NVIDIA GeForce RTX 2070', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 16500 },
            { id: 'rtx-2070s', name: 'NVIDIA GeForce RTX 2070 SUPER', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 18000 },
            { id: 'rtx-2080', name: 'NVIDIA GeForce RTX 2080', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 19500 },
            { id: 'rtx-2080s', name: 'NVIDIA GeForce RTX 2080 SUPER', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 20500 },
            { id: 'rtx-2080ti', name: 'NVIDIA GeForce RTX 2080 Ti', details: { tr: '11GB GDDR6', en: '11GB GDDR6' }, score: 22000 },
            { id: 'rtx-3050', name: 'NVIDIA GeForce RTX 3050', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 11000 },
            { id: 'rtx-3060', name: 'NVIDIA GeForce RTX 3060', details: { tr: '12GB GDDR6', en: '12GB GDDR6' }, score: 19500 },
            { id: 'rtx-3060ti', name: 'NVIDIA GeForce RTX 3060 Ti', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 20414 },
            { id: 'rtx-3070', name: 'NVIDIA GeForce RTX 3070', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 22291 },
            { id: 'rtx-3070ti', name: 'NVIDIA GeForce RTX 3070 Ti', details: { tr: '8GB GDDR6X', en: '8GB GDDR6X' }, score: 24000 },
            { id: 'rtx-3080', name: 'NVIDIA GeForce RTX 3080', details: { tr: '10GB GDDR6X', en: '10GB GDDR6X' }, score: 25180 },
            { id: 'rtx-3080ti', name: 'NVIDIA GeForce RTX 3080 Ti', details: { tr: '12GB GDDR6X', en: '12GB GDDR6X' }, score: 28000 },
            { id: 'rtx-3090', name: 'NVIDIA GeForce RTX 3090', details: { tr: '24GB GDDR6X', en: '24GB GDDR6X' }, score: 30000 },
            { id: 'rtx-3090ti', name: 'NVIDIA GeForce RTX 3090 Ti', details: { tr: '24GB GDDR6X', en: '24GB GDDR6X' }, score: 32000 },
            { id: 'rtx-4060', name: 'NVIDIA GeForce RTX 4060', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 18000 },
            { id: 'rtx-4060ti', name: 'NVIDIA GeForce RTX 4060 Ti', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 22000 },
            { id: 'rtx-4070', name: 'NVIDIA GeForce RTX 4070', details: { tr: '12GB GDDR6X', en: '12GB GDDR6X' }, score: 30000 },
            { id: 'rtx-4070ti', name: 'NVIDIA GeForce RTX 4070 Ti', details: { tr: '12GB GDDR6X', en: '12GB GDDR6X' }, score: 31642 },
            { id: 'rtx-4080', name: 'NVIDIA GeForce RTX 4080', details: { tr: '16GB GDDR6X', en: '16GB GDDR6X' }, score: 34440 },
            { id: 'rtx-4090', name: 'NVIDIA GeForce RTX 4090', details: { tr: '24GB GDDR6X', en: '24GB GDDR6X' }, score: 42000 },

            // AMD Radeon GPUs (some popular ones to balance selection)
            { id: 'rx-470', name: 'AMD Radeon RX 470', details: { tr: '4GB GDDR5', en: '4GB GDDR5' }, score: 9500 },
            { id: 'rx-570', name: 'AMD Radeon RX 570', details: { tr: '8GB GDDR5', en: '8GB GDDR5' }, score: 12000 },
            { id: 'rx-580', name: 'AMD Radeon RX 580', details: { tr: '8GB GDDR5', en: '8GB GDDR5' }, score: 12500 },
            { id: 'rx-5500xt', name: 'AMD Radeon RX 5500 XT', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 10500 },
            { id: 'rx-5600xt', name: 'AMD Radeon RX 5600 XT', details: { tr: '6GB GDDR6', en: '6GB GDDR6' }, score: 14000 },
            { id: 'rx-5700xt', name: 'AMD Radeon RX 5700 XT', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 17500 },
            { id: 'rx-6600', name: 'AMD Radeon RX 6600', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 15000 },
            { id: 'rx-6600xt', name: 'AMD Radeon RX 6600 XT', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 18000 },
            { id: 'rx-6700xt', name: 'AMD Radeon RX 6700 XT', details: { tr: '12GB GDDR6', en: '12GB GDDR6' }, score: 22000 },
            { id: 'rx-6800', name: 'AMD Radeon RX 6800', details: { tr: '16GB GDDR6', en: '16GB GDDR6' }, score: 26000 },
            { id: 'rx-6800xt', name: 'AMD Radeon RX 6800 XT', details: { tr: '16GB GDDR6', en: '16GB GDDR6' }, score: 29000 },
            { id: 'rx-6900xt', name: 'AMD Radeon RX 6900 XT', details: { tr: '16GB GDDR6', en: '16GB GDDR6' }, score: 32000 },
            { id: 'rx-7600', name: 'AMD Radeon RX 7600', details: { tr: '8GB GDDR6', en: '8GB GDDR6' }, score: 20000 },
            { id: 'rx-7700xt', name: 'AMD Radeon RX 7700 XT', details: { tr: '12GB GDDR6', en: '12GB GDDR6' }, score: 26000 },
            { id: 'rx-7800xt', name: 'AMD Radeon RX 7800 XT', details: { tr: '16GB GDDR6', en: '16GB GDDR6' }, score: 29000 },
            { id: 'rx-7900xt', name: 'AMD Radeon RX 7900 XT', details: { tr: '20GB GDDR6', en: '20GB GDDR6' }, score: 32000 },
            { id: 'rx-7900xtx', name: 'AMD Radeon RX 7900 XTX', details: { tr: '24GB GDDR6', en: '24GB GDDR6' }, score: 35000 },
        ];

        const ramData = [
            { id: '8gb-ddr3-1333', name: '8GB DDR3 1333MHz', score: 25 },
            { id: '16gb-ddr3-1600', name: '16GB DDR3 1600MHz', score: 40 },
            { id: '8gb-ddr4-2666', name: '8GB DDR4 2666MHz', score: 50 },
            { id: '16gb-ddr4-3200', name: '16GB DDR4 3200MHz', score: 70 },
            { id: '32gb-ddr4-3200', name: '32GB DDR4 3200MHz', score: 90 },
            { id: '32gb-ddr5-6000', name: '32GB DDR5 6000MHz', score: 100 },
            { id: '64gb-ddr5-6000', name: '64GB DDR5 6000MHz', score: 110 },
        ];

        const storageData = [
            { id: '500gb-hdd', name: '500GB HDD', score: 10 },
            { id: '128gb-ssd-500gb-hdd', name: '128GB SSD + 500GB HDD', score: 50 },
            { id: '256gb-ssd', name: '256GB SSD', score: 60 },
            { id: '500gb-ssd', name: '500GB SSD', score: 85 },
            { id: '1tb-nvme', name: '1TB NVMe SSD', score: 100 },
            { id: '2tb-nvme', name: '2TB NVMe SSD', score: 110 },
            { id: '4tb-nvme', name: '4TB NVMe SSD', score: 120 },
        ];

        const psuData = [
            { id: '400w', name: '400W', score: 45 },
            { id: '550w', name: '550W', score: 60 },
            { id: '650w', name: '650W', score: 70 },
            { id: '750w', name: '750W', score: 80 },
            { id: '850w', name: '850W', score: 90 },
            { id: '1000w', name: '1000W', score: 100 },
            { id: '1200w', name: '1200W', score: 110 },
        ];

        // Maksimum puanları dinamik olarak hesaplar (çubuk yüksekliklerini oranlamak için)
        const calculateMaxScores = () => {
            const maxTotalPossibleScore = Math.max(...cpuData.map(c => c.score)) +
                                       Math.max(...gpuData.map(g => g.score)) +
                                       Math.max(...ramData.map(r => r.score)) +
                                       Math.max(...storageData.map(s => s.score)) +
                                       Math.max(...psuData.map(p => p.score));

            return {
                cpu: Math.max(...cpuData.map(c => c.score)),
                gpu: Math.max(...gpuData.map(g => g.score)),
                ram: Math.max(...ramData.map(r => r.score)),
                storage: Math.max(...storageData.map(s => s.score)),
                psu: Math.max(...psuData.map(p => p.score)),
                total: maxTotalPossibleScore
            };
        };
        const maxScores = calculateMaxScores();

        // UI metinlerini güncelleyen fonksiyon
        function updateUIForLanguage(lang) {
            const currentTranslations = translations[lang];

            // Update title
            document.getElementById('appTitle').textContent = currentTranslations.appTitle;

            // Update elements with data-key attribute
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.getAttribute('data-key');
                if (currentTranslations[key]) {
                    if (element.tagName === 'INPUT' && element.hasAttribute('placeholder')) {
                        element.placeholder = currentTranslations[key];
                    } else {
                        element.textContent = currentTranslations[key];
                    }
                }
            });

            // Re-populate dropdowns to update their options' text (especially for details)
            populateDropdown('s1-cpu', cpuData);
            populateDropdown('s1-gpu', gpuData);
            populateDropdown('s1-ram', ramData);
            populateDropdown('s1-storage', storageData);
            populateDropdown('s1-psu', psuData);

            populateDropdown('s2-cpu', cpuData);
            populateDropdown('s2-gpu', gpuData);
            populateDropdown('s2-ram', ramData);
            populateDropdown('s2-storage', storageData);
            populateDropdown('s2-psu', psuData);

            // Update the language toggle dropdown selected value
            document.getElementById('languageToggle').value = lang;
        }


        // Dropdown'ları doldurma fonksiyonu
        function populateDropdown(selectElementId, data) {
            const select = document.getElementById(selectElementId);
            const currentTranslations = translations[currentLang];
            select.innerHTML = `<option value="">${currentTranslations.selectOption}</option>`; // Varsayılan seçenek
            data.forEach(item => {
                const option = document.createElement('option');
                option.value = item.id;
                // Use details based on current language if available, otherwise fallback to default string/name
                const itemDetails = item.details ? item.details[currentLang] || item.details.en || item.details.tr : '';
                option.textContent = `${item.name} ${itemDetails ? `(${itemDetails})` : ''}`;
                select.appendChild(option);
            });
        }

        // Dropdown'ı filtreleme fonksiyonu
        function filterDropdownOptions(selectElementId, searchInputId, data) {
            const select = document.getElementById(selectElementId);
            const searchInput = document.getElementById(searchInputId);
            const searchTerm = searchInput.value.toLowerCase();
            const currentTranslations = translations[currentLang];

            // Tüm seçenekleri gizle
            for (let i = 0; i < select.options.length; i++) {
                select.options[i].style.display = 'none';
            }

            // Arama terimine uyan seçenekleri göster
            // Varsayılan "-- Seçin --" seçeneğini her zaman göster
            select.options[0].style.display = 'block';

            data.forEach(item => {
                const itemDetails = item.details ? item.details[currentLang] || item.details.en || item.details.tr : '';
                if (item.name.toLowerCase().includes(searchTerm) || (itemDetails && itemDetails.toLowerCase().includes(searchTerm))) {
                    const option = select.querySelector(`option[value="${item.id}"]`);
                    if (option) {
                        option.style.display = 'block';
                    }
                }
            });
        }

        // Darboğaz hesaplama fonksiyonu
        const calculateBottleneck = (cpuScore, gpuScore) => {
            const currentTranslations = translations[currentLang];
            if (!cpuScore || !gpuScore) {
                return { percentage: null, explanation: currentTranslations.errorMessage }; // Simplified for now
            }

            const diff = Math.abs(cpuScore - gpuScore);
            const maxVal = Math.max(cpuScore, gpuScore);

            if (maxVal === 0) {
                return { percentage: 0, explanation: currentTranslations.bottleneckExplanation0 }; // Assuming 0 for no score
            }

            const percentage = (diff / maxVal) * 100;
            let explanation = "";
            let bottleneckComponent = "";

            if (cpuScore < gpuScore) {
                bottleneckComponent = currentTranslations.processor;
            } else if (gpuScore < cpuScore) {
                bottleneckComponent = currentTranslations.graphicsCard;
            } else {
                bottleneckComponent = currentTranslations.balanced;
            }

            if (percentage < 5) {
                explanation = currentTranslations.bottleneckExplanation0;
            } else if (percentage < 15) {
                explanation = currentTranslations.bottleneckExplanation1;
            } else if (percentage < 25) {
                explanation = currentTranslations.bottleneckExplanation2;
            } else {
                // Dynamically insert component name into the string
                explanation = currentTranslations.bottleneckExplanation3.replace('${component}', bottleneckComponent);
            }

            return {
                percentage: percentage.toFixed(1),
                explanation: `${bottleneckComponent} ${currentTranslations.bottleneckSuffix}: ${explanation}`,
            };
        };

        // Bileşen bazında sütun grafik oluşturma/güncelleme fonksiyonu (genel bar grafiği için)
        function createComparisonBar(parentElementId, label, score1, score2, maxScore, system1Name, system2Name) {
            const parentElement = document.getElementById(parentElementId);
            if (!parentElement) {
                console.error(`Hata: '${parentElementId}' ID'sine sahip ana element bulunamadı.`);
                return;
            }
            parentElement.innerHTML = `
                <h3 class="text-lg font-semibold text-gray-700 mb-2">${label}</h3>
                <div class="bar-chart-container">
                    <div class="bar-item">
                        <div class="bar bar-s1-color" style="height: ${Math.min((score1 / maxScore) * 100, 100)}%;">
                            <span>${score1.toLocaleString()}</span>
                        </div>
                        <span class="bar-label">${system1Name}</span>
                    </div>
                    <div class="bar-item">
                        <div class="bar bar-s2-color" style="height: ${Math.min((score2 / maxScore) * 100, 100)}%;">
                            <span>${score2.toLocaleString()}</span>
                        </div>
                        <span class="bar-label">${system2Name}</span>
                    </div>
                </div>
            `;
        }
        
        // Sayfa yüklendiğinde dropdown'ları doldur ve olay dinleyicileri ayarla
        document.addEventListener('DOMContentLoaded', () => {
            // Dropdown'ları doldur
            populateDropdown('s1-cpu', cpuData);
            populateDropdown('s1-gpu', gpuData);
            populateDropdown('s1-ram', ramData);
            populateDropdown('s1-storage', storageData);
            populateDropdown('s1-psu', psuData);

            populateDropdown('s2-cpu', cpuData);
            populateDropdown('s2-gpu', gpuData);
            populateDropdown('s2-ram', ramData);
            populateDropdown('s2-storage', storageData);
            populateDropdown('s2-psu', psuData);

            // Set initial language and theme
            updateUIForLanguage(currentLang);
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
            }


            // Arama kutuları için olay dinleyicileri
            document.getElementById('s1-cpu-search').addEventListener('input', () => filterDropdownOptions('s1-cpu', 's1-cpu-search', cpuData));
            document.getElementById('s1-gpu-search').addEventListener('input', () => filterDropdownOptions('s1-gpu', 's1-gpu-search', gpuData));
            document.getElementById('s2-cpu-search').addEventListener('input', () => filterDropdownOptions('s2-cpu', 's2-cpu-search', cpuData));
            document.getElementById('s2-gpu-search').addEventListener('input', () => filterDropdownOptions('s2-gpu', 's2-gpu-search', gpuData));

            // Tüm seçim kutularına ve isim girişlerine değişiklik olay dinleyicisi ekle (sonuçları gizlemek için)
            const selects = document.querySelectorAll('select');
            selects.forEach(select => {
                select.addEventListener('change', () => {
                    document.getElementById('comparisonResults').classList.add('hidden');
                    document.getElementById('errorMessage').classList.add('hidden');
                });
            });
            document.getElementById('s1-name').addEventListener('input', () => {
                document.getElementById('comparisonResults').classList.add('hidden');
                document.getElementById('errorMessage').classList.add('hidden');
            });
            document.getElementById('s2-name').addEventListener('input', () => {
                document.getElementById('comparisonResults').classList.add('hidden');
                document.getElementById('errorMessage').classList.add('hidden');
            });

            // Tema değiştirme butonu
            const themeToggleBtn = document.getElementById('themeToggle');
            themeToggleBtn.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                if (document.body.classList.contains('dark-mode')) {
                    localStorage.setItem('theme', 'dark');
                } else {
                    localStorage.setItem('theme', 'light');
                }
            });

            // Dil değiştirme butonu
            const languageToggle = document.getElementById('languageToggle');
            languageToggle.addEventListener('change', (event) => {
                currentLang = event.target.value;
                localStorage.setItem('language', currentLang);
                updateUIForLanguage(currentLang);
                // After language change, re-run comparison if results are visible
                if (!document.getElementById('comparisonResults').classList.contains('hidden')) {
                     document.getElementById('compareButton').click();
                }
            });
        });

        // Karşılaştır düğmesine tıklama olay dinleyicisi
        document.getElementById('compareButton').addEventListener('click', () => {
            const s1CpuId = document.getElementById('s1-cpu').value;
            const s1GpuId = document.getElementById('s1-gpu').value;
            const s1RamId = document.getElementById('s1-ram').value;
            const s1StorageId = document.getElementById('s1-storage').value;
            const s1PsuId = document.getElementById('s1-psu').value;

            const s2CpuId = document.getElementById('s2-cpu').value;
            const s2GpuId = document.getElementById('s2-gpu').value;
            const s2RamId = document.getElementById('s2-ram').value;
            const s2StorageId = document.getElementById('s2-storage').value;
            const s2PsuId = document.getElementById('s2-psu').value;

            const s1Name = document.getElementById('s1-name').value.trim() || translations[currentLang].system1NamePlaceholder;
            const s2Name = document.getElementById('s2-name').value.trim() || translations[currentLang].system2NamePlaceholder;

            const s1Cpu = cpuData.find(c => c.id === s1CpuId);
            const s1Gpu = gpuData.find(g => g.id === s1GpuId);
            const s1Ram = ramData.find(r => r.id === s1RamId);
            const s1Storage = storageData.find(s => s.id === s1StorageId);
            const s1Psu = psuData.find(p => p.id === s1PsuId);

            const s2Cpu = cpuData.find(c => c.id === s2CpuId);
            const s2Gpu = gpuData.find(g => g.id === s2GpuId);
            const s2Ram = ramData.find(r => r.id === s2RamId);
            const s2Storage = storageData.find(s => s.id === s2StorageId);
            const s2Psu = psuData.find(p => p.id === s2PsuId);

            const errorMessageElement = document.getElementById('errorMessage');
            const comparisonResultsElement = document.getElementById('comparisonResults');
            const currentTranslations = translations[currentLang];

            // Hata kontrolü
            if (!s1Cpu || !s1Gpu || !s2Cpu || !s2Gpu) {
                errorMessageElement.textContent = currentTranslations.errorMessage;
                errorMessageElement.classList.remove('hidden');
                comparisonResultsElement.classList.add('hidden');
                return;
            } else {
                errorMessageElement.classList.add('hidden');
                comparisonResultsElement.classList.remove('hidden');
                comparisonResultsElement.style.animation = 'none'; // Animasyonu sıfırla
                void comparisonResultsElement.offsetWidth; // DOM'u yeniden boyamaya zorla
                comparisonResultsElement.style.animation = null; // Animasyonu tekrar uygula
            }

            // Karşılaştırma başlığını güncelle
            document.getElementById('comparisonTitle').textContent = `${s1Name} vs ${s2Name} ${currentTranslations.comparisonTitleSuffix}`;


            // Genel Bilgileri Güncelle
            document.getElementById('system1Info').innerHTML = `
                <h3 class="text-xl font-bold text-indigo-700 mb-4">${s1Name} ${currentTranslations.infoSystemSuffix}</h3>
                <p class="text-gray-700"><span class="font-semibold">${currentTranslations.cpuLabel}</span> ${s1Cpu.name} ${s1Cpu.details[currentLang] ? `(${s1Cpu.details[currentLang]})` : ''}</p>
                <p class="text-gray-700"><span class="font-semibold">${currentTranslations.gpuLabel}</span> ${s1Gpu.name} ${s1Gpu.details[currentLang] ? `(${s1Gpu.details[currentLang]})` : ''}</p>
                <p class="text-gray-700"><span class="font-semibold">${currentTranslations.ramLabel}</span> ${s1Ram ? s1Ram.name : currentTranslations.selectOption}</p>
                <p class="text-gray-700"><span class="font-semibold">${currentTranslations.storageLabel}</span> ${s1Storage ? s1Storage.name : currentTranslations.selectOption}</p>
                <p class="text-gray-700"><span class="font-semibold">${currentTranslations.psuLabel}</span> ${s1Psu ? s1Psu.name : currentTranslations.selectOption}</p>
            `;
            document.getElementById('system2Info').innerHTML = `
                <h3 class="text-xl font-bold text-emerald-700 mb-4">${s2Name} ${currentTranslations.infoSystemSuffix}</h3>
                <p class="text-gray-700"><span class="font-semibold">${currentTranslations.cpuLabel}</span> ${s2Cpu.name} ${s2Cpu.details[currentLang] ? `(${s2Cpu.details[currentLang]})` : ''}</p>
                <p class="text-gray-700"><span class="font-semibold">${currentTranslations.gpuLabel}</span> ${s2Gpu.name} ${s2Gpu.details[currentLang] ? `(${s2Gpu.details[currentLang]})` : ''}</p>
                <p class="text-gray-700"><span class="font-semibold">${currentTranslations.ramLabel}</span> ${s2Ram ? s2Ram.name : currentTranslations.selectOption}</p>
                <p class="text-gray-700"><span class="font-semibold">${currentTranslations.storageLabel}</span> ${s2Storage ? s2Storage.name : currentTranslations.selectOption}</p>
                <p class="text-gray-700"><span class="font-semibold">${currentTranslations.psuLabel}</span> ${s2Psu ? s2Psu.name : currentTranslations.selectOption}</p>
            `;

            // Toplam Puanları Hesapla ve Güncelle
            const s1TotalScore = (s1Cpu?.score || 0) + (s1Gpu?.score || 0) + (s1Ram?.score || 0) + (s1Storage?.score || 0) + (s1Psu?.score || 0);
            const s2TotalScore = (s2Cpu?.score || 0) + (s2Gpu?.score || 0) + (s2Ram?.score || 0) + (s2Storage?.score || 0) + (s2Psu?.score || 0);
            
            // Toplam Puanları sütun grafik olarak göster
            createComparisonBar('totalScoreComparisonBar', currentTranslations.totalScoreComparison, s1TotalScore, s2TotalScore, maxScores.total, s1Name, s2Name);


            // Karşılaştırma Çubuklarını Güncelle (Diğer bileşenler için dikey çubuklar)
            createComparisonBar('cpuComparisonBar', currentTranslations.cpuPerformance, s1Cpu.score, s2Cpu.score, maxScores.cpu, s1Name, s2Name);
            createComparisonBar('gpuComparisonBar', currentTranslations.gpuPerformance, s1Gpu.score, s2Gpu.score, maxScores.gpu, s1Name, s2Name);
            createComparisonBar('ramComparisonBar', currentTranslations.ramPerformance, s1Ram ? s1Ram.score : 0, s2Ram ? s2Ram.score : 0, maxScores.ram, s1Name, s2Name);
            createComparisonBar('storageComparisonBar', currentTranslations.storagePerformance, s1Storage ? s1Storage.score : 0, s2Storage ? s2Storage.score : 0, maxScores.storage, s1Name, s2Name);
            createComparisonBar('psuComparisonBar', currentTranslations.psuSufficiency, s1Psu ? s1Psu.score : 0, s2Psu ? s2Psu.score : 0, maxScores.psu, s1Name, s2Name);

            // Darboğaz Analizini Güncelle
            const s1Bottleneck = calculateBottleneck(s1Cpu.score, s1Gpu.score);
            const s2Bottleneck = calculateBottleneck(s2Cpu.score, s2Gpu.score);
            document.getElementById('bottleneckAnalysis').innerHTML = `
                <h3 class="text-xl font-semibold mb-3">${currentTranslations.bottleneckAnalysis}</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <p class="font-bold text-lg mb-1">${s1Name} ${currentTranslations.bottleneckSuffix}</p>
                        <p class="text-2xl font-bold text-purple-700">${s1Bottleneck.percentage}%</p>
                        <p class="text-md">${s1Bottleneck.explanation}</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg mb-1">${s2Name} ${currentTranslations.bottleneckSuffix}</p>
                        <p class="text-2xl font-bold text-purple-700">${s2Bottleneck.percentage}%</p>
                        <p class="text-md">${s2Bottleneck.explanation}</p>
                    </div>
                </div>
            `;
        });
    </script>
</body>
</html>
